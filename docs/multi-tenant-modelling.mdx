---
title: "Design tenant-scoped notification architecture"
description: "Learn how to model multi-tenant notification architecture in SuprSend with tenant-level preferences, branding, templates, and vendor routing."
---

Multi-tenant platforms run a shared notification system across many customer organizations (tenants). The key requirement is tenant-specific customization: the same notification type must adapt based on tenant context‚Äîbranding/sender, templates and localization, user preferences, and routing (channel + vendor).

In this guide, we'll show how to model this in SuprSend using a fictional employee engagement platform, **WorkVibe**. WorkVibe serves many companies and helps them run employee communications such as employee onboarding, performance reviews, pulse surveys, recognition messages, and policy updates.

<Note>
**Example scenario:** We'll use **Uber** as our example‚Äîa customer of WorkVibe, using the platform to run employee communications. WorkVibe's notification system must let its tenant Uber customize notifications, within WorkVibe's platform:

- Message templates provided by WorkVibe (content, tone, localization)
- Which channels (email, Slack, etc.) are used for communication
- Employee notification preferences
- Branding and sender identity for Uber (e.g., hr@uber.com)

‚Äîall while WorkVibe continues to operate a single shared, multi-tenant notification system.

</Note>

---

## Understanding the Structure

WorkVibe organizes notifications using a clear hierarchy that scales across multiple customer companies:

<Card title="Notification hierarchy" icon="sitemap">
  **Generic structure:**
  ```
  Platform ‚Üí Customer (Tenant) ‚Üí Notification Type
  ```

  **WorkVibe example:**
  ```
  WorkVibe ‚Üí Uber ‚Üí Onboarding ‚Üí New Employee Welcome Email
  ```
</Card>

This hierarchy helps you design notifications that scale across multiple customer companies without duplicating templates or workflows.

---

## Concept Mapping

How WorkVibe platform concepts map to SuprSend:

<table>
  <thead>
    <tr>
      <th>WorkVibe Platform</th>
      <th>SuprSend</th>
      <th>Example</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Environments</strong></td>
      <td><strong>Workspace</strong></td>
      <td>Dev / Staging / Pre-prod / Prod</td>
    </tr>
    <tr>
      <td><strong>Customer Organization</strong></td>
      <td><strong>Tenant</strong></td>
      <td>Uber tenant with branding and preferences</td>
    </tr>
    <tr>
      <td><strong>Employee</strong></td>
      <td><strong>User</strong></td>
      <td>Employee with email, phone, and profile data</td>
    </tr>
    <tr>
      <td><strong>Orchestration Steps</strong></td>
      <td><strong>Workflows</strong></td>
      <td>Onboarding sequence: welcome email ‚Üí first week check-in ‚Üí manager introduction</td>
    </tr>
    <tr>
      <td><strong>Message Templates</strong></td>
      <td><strong>Templates</strong></td>
      <td>New hire welcome email template with tenant branding</td>
    </tr>
    <tr>
      <td><strong>Company-level Controls</strong></td>
      <td><strong>Notification Categories</strong></td>
      <td><code>onboarding.new_hire_welcome</code></td>
    </tr>
    <tr>
      <td><strong>Employee Preferences</strong></td>
      <td><strong>User Preferences</strong></td>
      <td>Employee opt-in/out for specific notification types</td>
    </tr>
  </tbody>
</table>

---

## Setup Steps

Follow these steps to set up your tenant-scoped notification architecture:

### 1. Create Tenants

Create a tenant for each customer company programmatically using the SuprSend API or SDK. Each tenant stores branding attributes (logo, website, brand colors) along with any custom properties required for personalization.

**Required fields:**

<Card title="Example: Uber tenant configuration" icon="settings">
  <ul>
    <li><strong>tenant_id:</strong> <code>uber</code> (unique identifier)</li>
    <li><strong>tenant_name:</strong> Uber (display name)</li>
    <li><strong>logo:</strong> https://assets.yourdomain.com/tenants/uber/logo.png (branding)</li>
    <li><strong>primary_color:</strong> #000000 (branding)</li>
    <li><strong>timezone:</strong> America/Los_Angeles (localization)</li>
  </ul>
</Card>

Other than tenant properties, notification preferences and vendors can be customized at the per-tenant level.

üìò [Tenants ‚Üí](/docs/tenants) | [Node.js SDK ‚Üí](/docs/node-tenants) | [Python SDK ‚Üí](/docs/python-tenants) | [Go SDK ‚Üí](/docs/tenants-go)

---

### 2. Create Notification Categories

Create categories mapping to your platform's notification types. These categories are linked to Workflows & Preferences. Use **Sections** for product areas and **Sub-categories** for notification types.

For WorkVibe, the notification category structure will look like:

- **Section:** Product area (e.g., `Onboarding & Lifecycle`, `Feedback & Engagement`)
- **Sub-category:** Notification type (e.g., `New Hire Welcome`, `First Week Check-in`, `Manager Feedback Request`)

<Tip>
Group similar notifications together for neatly organizing different notification types. Use `tags` in categories to filter categories within your application.
</Tip>

üìò [Notification Categories ‚Üí](/docs/notification-category) | [Create categories ‚Üí](https://app.suprsend.com/en/staging/developers/preference-categories)

---

### 3. Configure Preferences

SuprSend uses a four-layer preference system to determine which channels are used for each notification:

<CardGroup cols={2}>
  <Card title="Universal Set (U)" icon="globe">
    All categories defined by your platform
  </Card>
  <Card title="Tenant Visibility (T1)" icon="eye">
    Categories visible to tenant
  </Card>
  <Card title="Tenant Admin (T2)" icon="user-shield">
    Tenant admins can disable categories/channels
  </Card>
  <Card title="End user Preferences (S)" icon="user">
    End users opt-in/out at category/channel level
  </Card>
</CardGroup>

**How it works:**

SuprSend determines final delivery channels by progressively applying platform rules, company controls, and employee preferences.

**Evaluation formula:** `Final Channels = U ‚à© T1 ‚à© T2 ‚à© S`

To make a category mandatory, set "Can't Unsubscribe" on the Notification Category.

<Card title="Example: Channel evaluation" icon="filter">
  <ul>
    <li><strong>WorkVibe Platform (U):</strong> Email ‚úÖ, SMS ‚úÖ, Slack ‚úÖ</li>
    <li><strong>Uber visibility:</strong> Email ‚úÖ, SMS ‚úÖ, Slack ‚úÖ</li>
    <li><strong>Uber admin:</strong> Email ‚úÖ, SMS ‚ùå, Slack ‚úÖ</li>
    <li><strong>Employee:</strong> Email ‚úÖ, SMS ‚úÖ, Slack ‚ùå</li>
    <li><strong>Final result:</strong> <strong>Email ‚úÖ only</strong></li>
  </ul>
</Card>

#### Expose Preferences to Customer Companies

Allow customer companies like Uber to manage their notification preferences through your platform.

**Recommended approach:** We will build an admin page in your application that calls SuprSend's Tenant Preference APIs. This gives you full control over the UI and integrates with the existing admin dashboard.

**Optional:** Embed SuprSend's preference UI for faster rollout if you don't need custom styling.

<Note>
**Preference exposure:** Customer admins can control which notification categories are visible to their organization and which channels are enabled/disabled. This gives them control over their notification strategy while maintaining platform-level governance.
</Note>

üìò [Tenant Preferences ‚Üí](/docs/tenant-preference) | [User Preferences ‚Üí](/docs/user-preferences) | [Preference Evaluation ‚Üí](/docs/preference-evaluation) | [Embedded Preferences ‚Üí](/docs/embedded-preference-centre)

---

### 4. Create Templates

Create templates for each notification type. For Uber's new employee onboarding, create `NEW_HIRE_WELCOME_EMAIL`. Use tenant variables for automatic branding.

<Note>
**Template reuse:** Templates are created once by the platform and rendered at send time with tenant-specific branding. This avoids creating duplicate templates per customer while still ensuring fully branded communication.
</Note>

**Template variables:**

```handlebars
// Data variables
{{employee_name}}          ‚Üí "Sarah Chen"
{{start_date}}              ‚Üí "2026-01-15"
{{manager_name}}            ‚Üí "John Doe"
{{department}}              ‚Üí "Engineering"

// Tenant branding
{{$tenant.logo}}            ‚Üí Uber logo URL
{{$tenant.primary_color}}   ‚Üí "#000000"
{{$tenant.tenant_name}}     ‚Üí "Uber"

// Recipient info
{{$recipient.name}}         ‚Üí "Sarah Chen"
{{$recipient.email}}        ‚Üí "sarah@uber.com"
```

When Uber triggers a new hire notification, SuprSend automatically applies Uber's branding.

#### Expose Templates to Customer Applications

One common approach is to allow customer companies (like Uber) to customize templates through embeddable templates. As WorkVibe, you'll expose template editing capabilities to your customer companies.

**How it works:**

- **Template fetching:** Your customer companies (like Uber) fetch templates by `template_slug`. They pass `tenant_id` and `language` to get qualified variants‚Äîif a tenant-specific variant exists, it's returned; otherwise, the default variant is shown.
- **Variant creation:** Your customer companies can edit existing variants or create new tenant-specific variants. When creating tenant variants, they set conditions like `$tenant.id = "uber"`.

**Scoped JWT Authentication:**

To securely expose templates to your customer companies, use scoped JWT authentication. This ensures that each customer company can only access and modify templates for their own tenant.

1. **Generate a signing key** from SuprSend Dashboard (Developers ‚Üí API Keys ‚Üí Signing Keys)
2. **Create a scoped JWT token** on your backend with the following payload:

```json
{
  "entity_type": "subscriber",
  "entity_id": "customer_admin_user_id",
  "exp": 1725814228,
  "iat": 1725814228,
  "scope": {
    "tenant_id": "uber"
  }
}
```

3. **Sign the token** using ES256 algorithm with your signing key
4. **Pass the token** to your customer company's frontend application

<Note>
**Security:** If the `tenant_id` passed in the template request doesn't match the JWT payload scope `tenant_id`, SuprSend will return a `403` error. This ensures tenant isolation and prevents customers from accessing other tenants' templates.
</Note>

**Template structure:**

Templates use standardized snake_case fields and handlebars variables (e.g., `{{variable}}`). All channels (email, SMS, WhatsApp, push) follow consistent structures. SuprSend automatically selects the most specific variant based on tenant ID, language, and custom conditions.

**Benefits:**

- **Tenant isolation:** Changes made by Uber won't affect other tenants' templates
- **Platform control:** Your platform maintains template structure and approval workflows
- **Self-service:** Customers can customize content without engineering support


For more details on template embedding, see the [Embeddable Template Editor ‚Üí](/docs/embeddable-templates) guide.

üìò [Templates ‚Üí](/docs/templates) | [Email Templates ‚Üí](/docs/email-template)

---

### 5. Choose Workflow Strategy

A **workflow** defines the orchestration logic for your notifications‚Äîthe sequence of steps, conditions, delays, and channels used to deliver messages. For example, WorkVibe's product team might build a workflow for new employee onboarding that sends a welcome email on day one, a first-week check-in survey on day seven, and a manager introduction Slack message on day ten.

SuprSend supports three types of workflows. Choose the approach that best fits your use case:

<Tabs>
  <Tab title="UI Builder">
    Build workflows visually in the SuprSend dashboard with drag-and-drop nodes, conditions, and delays. Workflows are created and managed through the UI.
    
    **When to use:**
    - Non-engineers need to create or modify workflows
    - Product or marketing teams need self-service workflow creation
    - Workflows change frequently and need quick iteration
  </Tab>

  <Tab title="Dynamic Workflows">
     Trigger notifications programmatically without pre-creating workflows. Your platform owns orchestration and triggers workflows on-demand with template and category.
    
    **When to use:**
    - Your platform already controls business logic
    - You need runtime workflow creation
    - Transactional notifications triggered by user actions
    - Faster go-live without workflow setup
  </Tab>

  <Tab title="Workflows API">
     Create and update workflows programmatically using the Management API. Workflows are defined in code and synced to SuprSend via API.
    
    **When to use:**
    - Workflows are version-controlled in your codebase
    - You want to manage workflows as infrastructure-as-code
    - CI/CD integration for workflow deployment
    - Bulk workflow creation or migration
  </Tab>
</Tabs>




üìò [Workflows ‚Üí](/docs/workflows) | [Dynamic Workflow Trigger ‚Üí](/reference/dynamic-workflow-trigger) | [Workflows API ‚Üí](/reference/create-update-workflow)

---

### 6. Configure Tenant Vendors (Optional)

Enterprise customers may require their own SMTP servers or vendor accounts for deliverability, compliance, or branding requirements. For example, if Uber requires their own SMTP domain for branding (e.g., sending from `noreply@uber.com`), you can configure their SMTP within your email provider and set it as a custom property in the tenant. This can be referenced in the `from_email` field in your templates. Alternatively, if Uber has its own email provider or SMS provider that they want to use, you can add it as a tenant vendor.

<Info>
**Vendor fallback chain:** If Uber's SMTP fails, notifications automatically fall back to: Uber SMTP ‚Üí Platform default SMTP (fallback)
</Info>

üìò [Tenant Vendors ‚Üí](/docs/tenant-vendor) | [Vendor Fallback ‚Üí](/docs/vendor-fallback)

---

## End-to-End Notification Flow

When WorkVibe triggers a new employee onboarding notification for Uber, SuprSend handles everything automatically:

<Steps>
  <Step title="1. Platform Identifies Tenant">
    WorkVibe passes `tenant_id: "uber"` in the workflow trigger payload. SuprSend uses this to identify which customer company's branding and preferences to apply.
  </Step>
  <Step title="2. Apply Tenant Preferences">
    Checks Uber's defaults for `onboarding.new_hire_welcome`: Email enabled, SMS disabled, Slack enabled.
  </Step>
  <Step title="3. Apply Employee Preferences">
    Employee opts out of Slack ‚Üí Final channels: Email only.
  </Step>
  <Step title="4. Resolve Template">
    Checks for a tenant-specific variant. Falls back to `NEW_HIRE_WELCOME_EMAIL` with Uber branding.
  </Step>
  <Step title="5. Render Branding">
    Applies Uber's logo, colors, and company name to template.
  </Step>
  <Step title="6. Route via Vendor">
    Routes through Uber's SMTP if configured, otherwise platform default.
  </Step>
  <Step title="7. Deliver">
    Email sent with Uber branding and onboarding details.
  </Step>
</Steps>

üìò [Dynamic Workflow Trigger ‚Üí](/reference/dynamic-workflow-trigger)

---

## Other Common Scenarios

This data modeling approach applies to various multi-tenant marketplaces and platforms:

<CardGroup cols={2}>
  <Card title="Travel booking platforms" icon="plane">
    Travelers receive confirmations branded by hotels/airlines, with tenant-specific preferences and vendor routing
  </Card>
  <Card title="Food delivery marketplaces" icon="utensils">
    Customers receive order updates branded by restaurants, each with their own branding and notification preferences
  </Card>
  <Card title="E-commerce marketplaces" icon="store">
    Shoppers receive purchase confirmations branded by sellers, with per-seller branding and vendor configuration
  </Card>
  <Card title="Event ticketing platforms" icon="ticket">
    Attendees receive tickets branded by event organizers, with organizer-level preferences and custom SMTP
  </Card>
  <Card title="Learning platforms" icon="graduation-cap">
    Students receive course updates branded by educational institutions, with institution-specific branding and channels
  </Card>
  <Card title="Healthcare scheduling platforms" icon="heart">
    Patients receive appointment reminders branded by clinics, with clinic-level preferences and compliance routing
  </Card>
</CardGroup>

<Note>
The same principles apply: end users interact with your platform, but notifications must reflect each customer's branding, preferences, and vendor routing.
</Note>

---
