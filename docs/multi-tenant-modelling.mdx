---
title: "Design tenant-scoped notification architecture"
description: "Architectural patterns for implementing tenant-scoped notification systems with per-tenant preferences, templates, and vendor routing in SuprSend."
---

Multi-tenant platforms require a shared notification infrastructure that supports tenant-specific configuration. The notification system must dynamically adapt notification delivery based on tenant context, including preferences, template variants, localization, and channel routing (channel selection and vendor assignment).

This documentation demonstrates the implementation pattern using a reference architecture for an employee engagement platform. The example covers tenant-scoped customization of notification templates, channel preferences, user preferences, and vendor routing.

<Note>
**Reference Implementation:** This guide uses **Uber** as a tenant example within the employee engagement platform. The architecture enables tenant-level configuration of:

- Template variants and content localization
- Channel enablement and routing rules
- User preference management
- Branding attributes and sender identity (e.g., `hr@uber.com`)

The system maintains a single shared notification infrastructure while supporting per-tenant customization.

</Note>

---

## Reference Architecture

The notification architecture follows a hierarchical structure that enables tenant isolation while maintaining shared infrastructure:

<Card title="Notification architecture" icon="sitemap">
  ```
  WorkVibe ‚Üí Uber ‚Üí Onboarding ‚Üí New Employee Welcome Email
  ```
</Card>

The following sections detail the data model and configuration required to implement this architecture in SuprSend, enabling multi-tenant notification delivery without template or workflow duplication.

---

## Platform Entity Mapping

The following table maps platform concepts to SuprSend entities:

| Platform Concept | SuprSend Entity | Implementation Example |
|:------------------|:---------|:--------|
| **Environments** | **[Workspace](/docs/what-is-suprsend#workspaces)** | Dev, Staging, Pre-prod, Prod |
| **Tenant Organization** | **[Tenant](/docs/tenants)** | Uber (`tenant_id: uber`) |
| **End User** | **[User](/docs/users)** | User profile with email, phone, and metadata (`distinct_id: employee1`) |
| **Notification Orchestration** | **[Workflows](/docs/workflows)** | Onboarding sequence: welcome email ‚Üí first week check-in ‚Üí manager introduction |
| **Message Content** | **[Templates](/docs/templates)** | Multi-channel template for new hire welcome (Email, SMS) |
| **Notification Type Classification** | **[Notification Categories](/docs/notification-category)** | `onboarding.new_hire_welcome` |
| **User Channel Preferences** | **[User Preferences](/docs/user-preferences)** | Per-category and per-channel opt-in/opt-out configuration |


---

## Data Model Implementation

Implement the multi-tenant notification architecture using the following SuprSend entities and configuration:

### 1. Tenants

Create tenant entities programmatically via the SuprSend API or SDK. Each tenant entity stores branding attributes (logo, website, brand colors) and custom properties required for template personalization.

**Required Configuration:**

<Card title="Example: Uber tenant configuration" icon="gear">
  <ul>
    <li><strong>tenant_id:</strong> <code>uber</code> </li>
    <li><strong>tenant_name:</strong> Uber </li>
    <li><strong>logo:</strong> https://assets.yourdomain.com/tenants/uber/logo.png </li>
    <li><strong>primary_color:</strong> #000000 </li>
    <li><strong>timezone:</strong> America/Los_Angeles </li>
  </ul>
</Card>

Tenants support per-tenant configuration of notification preferences, channel enablement, and vendor routing.

üìò [Tenants ‚Üí](/docs/tenants) | [Node.js SDK ‚Üí](/docs/node-tenants) | [Python SDK ‚Üí](/docs/python-tenants) | [Go SDK ‚Üí](/docs/tenants-go)

---

### 2. Notification Categories

Notification categories classify notification types and link to workflows and preference management. SuprSend supports hierarchical organization using **Sections** and **Sub-categories**.

Category structure:

- **Section:** Product area classification (e.g., `Onboarding & Lifecycle`, `Feedback & Engagement`)
- **Sub-category:** Specific notification type identifier (e.g., `New Hire Welcome`, `First Week Check-in`, `Manager Feedback Request`)

<img src="/images/categories.png" alt="Notification categories example" width="700" />

üìò [Notification Categories ‚Üí](/docs/notification-category) | [Create categories ‚Üí](https://app.suprsend.com/en/staging/developers/preference-categories)

---

### 3. Preferences

SuprSend implements a four-layer preference evaluation system to determine notification delivery channels. The system applies platform-level, tenant-level, and user-level rules in sequence:

<CardGroup cols={2}>
  <Card title="Universal Set (U)" icon="globe">
    Platform-defined category set available across all tenants
  </Card>
  <Card title="Tenant Visibility (T1)" icon="eye">
    Platform-controlled category visibility per tenant
  </Card>
  <Card title="Tenant Configuration (T2)" icon="user-shield">
    Tenant-admin controlled category and channel enablement
  </Card>
  <Card title="User Preferences (S)" icon="user">
    End-user opt-in/opt-out at category and channel granularity
  </Card>
</CardGroup>

**Evaluation Logic:**

Channel delivery is determined by set intersection of all preference layers.

**Evaluation formula:** `Final Channels = U ‚à© T1 ‚à© T2 ‚à© S`

**Example: Channel evaluation**

| Layer | Email | SMS | Slack |
|-------|-------|-----|-------|
| **WorkVibe Platform (U)** | ‚úÖ | ‚úÖ | ‚úÖ |
| **Uber visibility (T1)** | ‚úÖ | ‚úÖ | ‚úÖ |
| **Uber admin (T2)** | ‚úÖ | ‚ùå | ‚úÖ |
| **Employee (S)** | ‚úÖ | ‚úÖ | ‚ùå |
| **Final result** | **‚úÖ** | ‚ùå | ‚ùå |

#### Tenant Preference Management

Tenant preference management is implemented via SuprSend's Tenant Preference APIs, authenticated with tenant-scoped JWT tokens. The platform application provides an admin interface that consumes these APIs to enable tenant administrators to configure notification categories and channel preferences.

**Implementation Pattern:**

- Platform application renders admin UI for notification settings
- API calls are authenticated with tenant-scoped JWT tokens
- Tenant administrators configure category and channel preferences within the platform application
- Preferences are persisted via SuprSend Tenant Preference APIs

This approach maintains platform UI/UX control while delegating preference configuration to tenant administrators.

üìò [Tenant Preferences ‚Üí](/docs/tenant-preference) | [User Preferences ‚Üí](/docs/user-preferences) | [Preference Evaluation ‚Üí](/docs/preference-evaluation) | [Embedded Preferences ‚Üí](/docs/embedded-preference-centre)

---

### 4. Templates

Templates define notification content structure for each notification type. Templates are created once at the platform level and rendered at delivery time with tenant-specific branding and personalization variables.

<Note>
**Template Architecture:** Templates are platform-scoped entities that support tenant-specific variants. Templates render with tenant branding variables at delivery time, enabling single-template definition with multi-tenant branding. Templates can be exposed to tenant administrators for customization via the Embeddable Template Editor.
</Note>

**Template Variable Schema:**
Templates use standardized snake_case field naming and Handlebars syntax (`{{variable}}`). All channel types (email, SMS, WhatsApp, push) follow consistent variable structures. 

```handlebars
// Data variables
{{employee_name}}          ‚Üí "Sarah Chen"
{{start_date}}              ‚Üí "2026-01-15"
{{manager_name}}            ‚Üí "John Doe"
{{department}}              ‚Üí "Engineering"

// Tenant branding
{{$tenant.logo}}            ‚Üí Uber logo URL
{{$tenant.primary_color}}   ‚Üí "#000000"
{{$tenant.tenant_name}}     ‚Üí "Uber"

// Recipient info
{{$recipient.name}}         ‚Üí "Sarah Chen"
{{$recipient.email}}        ‚Üí "sarah@uber.com"
```

![Template example: New Hire Welcome Alert](/images/template__welcome.png)

#### Template Customization for Tenants

Tenant-specific template customization is implemented via SuprSend's Embeddable Template Editor, integrated into the platform's admin interface.

**Implementation Flow:**

- **Template Retrieval:** Platform application fetches templates via SuprSend Management API
- **Variant Management:** Tenant administrators can create or modify tenant-specific template variants
- **Variant Resolution:** SuprSend automatically resolves the most specific variant based on tenant ID, language, and custom conditions at delivery time

**Authentication:**

Template editing is secured via tenant-scoped JWT authentication, ensuring tenants can only access and modify templates scoped to their tenant ID.

For implementation details, see the [Embeddable Template Editor](/docs/embeddable-templates) documentation.

üìò [Templates ‚Üí](/docs/templates) | [Email Templates ‚Üí](/docs/email-template)

---

### 5. Workflows

Workflows define notification orchestration logic, including step sequences, conditional branching, delays, and channel routing. Workflows are tenant-agnostic and execute with tenant context provided at trigger time.

<img src="/images/workflow_welcome.png" alt="Workflow example: New Employee Onboarding" width="250" />

SuprSend supports three workflow creation methods:

<Tabs>
  <Tab title="UI Builder">
    Visual workflow construction via the SuprSend dashboard using drag-and-drop nodes, conditions, and delays. Workflows are created and managed through the UI interface.
    
    **Use Cases:**
    - Non-technical team members create and modify workflows
    - Rapid workflow iteration and testing
    - Workflow versioning and environment promotion via CLI
  </Tab>

  <Tab title="Dynamic Workflows">
    Programmatic workflow execution without pre-defined workflow entities. Dynamic workflows are created at trigger time and cannot be modified via UI.
    
    **Use Cases:**
    - Single-step transactional notifications (e.g., email verification)
    - Rapid deployment without workflow setup overhead
  </Tab>

  <Tab title="Workflows API">
    Programmatic workflow creation and management via the Management API. Workflows are defined as code and synchronized to SuprSend via API calls.
    
    **Use Cases:**
    - Version-controlled workflow definitions in codebase
    - Infrastructure-as-code workflow management
    - CI/CD pipeline integration for workflow deployment
    - Bulk workflow creation or migration
    - Platform-controlled business logic
  </Tab>
</Tabs>




üìò [Workflows ‚Üí](/docs/workflows) | [Dynamic Workflow Trigger ‚Üí](/reference/dynamic-workflow-trigger) | [Workflows API ‚Üí](/reference/create-update-workflow)

---

### 6. Tenant Vendors (Optional)

Tenants may require dedicated vendor configurations (SMTP servers, SMS providers) for deliverability, compliance, or branding requirements. Tenant vendors are configured at the tenant level and take precedence over platform default vendors.

**Configuration Pattern:**

- SMTP configuration: Set tenant SMTP credentials as tenant custom properties, referenced in template `from_email` fields
- Vendor assignment: Configure tenant-specific vendors via Tenant Vendor APIs for SMS, email, and other channels

<Info>
**Vendor Fallback:** If a tenant vendor fails, SuprSend automatically falls back to the platform default vendor for that channel type.
</Info>

üìò [Tenant Vendors ‚Üí](/docs/tenant-vendor) | [Vendor Fallback ‚Üí](/docs/vendor-fallback)

---

## Notification Delivery Flow

The following sequence describes the end-to-end notification delivery process when a workflow is triggered with tenant context:

<Steps>
  <Step title="Tenant Context Resolution">
    Platform application includes `tenant_id: "uber"` in the workflow trigger payload. SuprSend resolves tenant entity and associated configuration.
  </Step>
  <Step title="Tenant Preference Evaluation">
    System evaluates tenant-level preferences for `onboarding.new_hire_welcome`: Email enabled, SMS disabled, Slack enabled.
  </Step>
  <Step title="User Preference Evaluation">
    System applies user-level preferences. If user opts out of Slack, final channel set is Email only.
  </Step>
  <Step title="Template Resolution">
    System resolves template variant hierarchy: checks for tenant-specific variant, falls back to default `NEW_HIRE_WELCOME_ALERT` template with tenant branding variables.
  </Step>
  <Step title="Vendor Routing">
    System routes notification through tenant-configured vendor if available, otherwise uses platform default vendor.
  </Step>
  <Step title="Notification Delivery">
    Notification is delivered across enabled channels with tenant branding and personalization applied.
  </Step>
</Steps>

<img src="/images/dynamic_wf.png" alt="Workflow trigger success example" width="700" />

üìò [Dynamic Workflow Trigger ‚Üí](/reference/dynamic-workflow-trigger)

---

## Other Common Scenarios

This data modeling approach applies to various multi-tenant marketplaces and platforms:

<CardGroup cols={2}>
  <Card title="Travel booking platforms" icon="plane">
    Travelers receive confirmations branded by hotels/airlines, with tenant-specific preferences and vendor routing
  </Card>
  <Card title="Food delivery marketplaces" icon="utensils">
    Customers receive order updates branded by restaurants, each with their own branding and notification preferences
  </Card>
  <Card title="E-commerce marketplaces" icon="store">
    Shoppers receive purchase confirmations branded by sellers, with per-seller branding and vendor configuration
  </Card>
  <Card title="Event ticketing platforms" icon="ticket">
    Attendees receive tickets branded by event organizers, with organizer-level preferences and custom SMTP
  </Card>
  <Card title="Learning platforms" icon="graduation-cap">
    Students receive course updates branded by educational institutions, with institution-specific branding and channels
  </Card>
  <Card title="Healthcare scheduling platforms" icon="heart">
    Patients receive appointment reminders branded by clinics, with clinic-level preferences and compliance routing
  </Card>
</CardGroup>

---
