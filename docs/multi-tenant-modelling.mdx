---
title: "Design tenant-scoped notification architecture"
description: "Learn how to model multi-tenant notification architecture in SuprSend with tenant-level preferences, templates, and vendor routing."
---

Multi-tenant platforms run a *shared notification system* across many customer organizations (tenants). The key requirement is *tenant-specific customization*: the same notification type must adapt based on tenant context‚Äîpreferences, templates and localization, and routing (channel + vendor).

In this guide, we'll show how to model this in SuprSend using an example employee engagement platform called **WorkVibe**. It helps its customers send employee communications such as employee onboarding, performance reviews, pulse surveys, recognition messages, and policy updates.

<Note>
**Example scenario:** We'll use **Uber** as an example customer of WorkVibe. Uber uses WorkVibe platform to send notifications to its employees. WorkVibe's notification system must let its tenant Uber customize notifications within WorkVibe's platform:

- Default templates provided by WorkVibe (content, tone, localization)
- Which channels (email, Slack, etc.) are used for communication
- Employee notification preferences
- Branding and sender identity for Uber (e.g., hr@uber.com)

‚Äîall while WorkVibe continues to operate a single shared, multi-tenant notification system.

</Note>

---

## WorkVibe Company Structure

For this example let's consider WorkVibe has the following notification architecture that is common across all its customers:

<Card title="Notification architecture" icon="sitemap">
  ```
  WorkVibe ‚Üí Uber ‚Üí Onboarding ‚Üí New Employee Welcome Email
  ```
</Card>

In the next section we will model this architecture in SuprSend platform so notifications can be sent across multiple tenants without duplicating templates or workflows.

---

## WorkVibe Concept Mapping to SuprSend 

| WorkVibe Platform | SuprSend | Example |
|:------------------|:---------|:--------|
| **Environments** | **Workspace** | Dev, Staging, Pre-prod, Prod |
| **Customer Organization** | **Tenant** | Uber (`tenant_id: uber`) |
| **Employee** | **User** | Employee with email, phone, and profile data (`distinct_id: employee1`) |
| **Orchestration Steps** | **Workflows** | Onboarding sequence: welcome email ‚Üí first week check-in ‚Üí manager introduction |
| **Message Templates** | **Templates** | New hire welcome email template with tenant branding |
| **Company-level Controls** | **Notification Categories** | `onboarding.new_hire_welcome` |
| **Employee Preferences** | **User Preferences** | Employee opt-in/out for specific notification types |

---

## Data Modeling in SuprSend

Follow these steps to model the multi-tenant notification architecture in SuprSend:

### 1. Tenants

We have created a tenant for each customer company programmatically using the SuprSend API or SDK. Each tenant stores branding attributes (logo, website, brand colors) along with some custom properties required for personalization.

**Required fields:**

<Card title="Example: Uber tenant configuration" icon="gear">
  <ul>
    <li><strong>tenant_id:</strong> <code>uber</code> </li>
    <li><strong>tenant_name:</strong> Uber </li>
    <li><strong>logo:</strong> https://assets.yourdomain.com/tenants/uber/logo.png </li>
    <li><strong>primary_color:</strong> #000000 </li>
    <li><strong>timezone:</strong> America/Los_Angeles </li>
  </ul>
</Card>

Other than branding properties, SuprSend allows customization of notification preferences and vendors at the per-tenant level.

üìò [Tenants ‚Üí](/docs/tenants) | [Node.js SDK ‚Üí](/docs/node-tenants) | [Python SDK ‚Üí](/docs/python-tenants) | [Go SDK ‚Üí](/docs/tenants-go)

---

### 2. Notification Categories

We have created categories mapping to WorkVibe's notification types. These categories will be linked to Workflows & Preferences. SuprSend provides **Sections** and **Sub-categories** to neatly organize notification categories.

For WorkVibe, the notification categories look like:

- **Section:** Product area (e.g., `Onboarding & Lifecycle`, `Feedback & Engagement`)
- **Sub-category:** Notification type (e.g., `New Hire Welcome`, `First Week Check-in`, `Manager Feedback Request`)

<Tip>
Group similar notifications together for neatly organizing different notification types. SuprSend provides `tags` to filter categories within WorkVibe's application.
</Tip>

üìò [Notification Categories ‚Üí](/docs/notification-category) | [Create categories ‚Üí](https://app.suprsend.com/en/staging/developers/preference-categories)

---

### 3. Configure Preferences

SuprSend uses a four-layer preference system to determine which notifications will be sent out. For WorkVibe we want admins of tenants to define which notifications will be applicable for their organizations:

<CardGroup cols={2}>
  <Card title="Universal Set (U)" icon="globe">
    All categories defined by WorkVibe
  </Card>
  <Card title="Visible to Tenant (T1)" icon="eye">
    WorkVibe chooses which categories are visible to specific tenants
  </Card>
  <Card title="Configured by Tenant Admins (T2)" icon="user-shield">
    Tenant admins can disable categories/channels within WorkVibe's application
  </Card>
  <Card title="End user Preferences (S)" icon="user">
    Employees can opt-in/out at category/channel level
  </Card>
</CardGroup>

**How it works:**

SuprSend determines final delivery channels by progressively applying platform rules, company controls, and employee preferences.

**Evaluation formula:** `Final Channels = U ‚à© T1 ‚à© T2 ‚à© S`

**Example: Channel evaluation**

| Layer | Email | SMS | Slack |
|-------|-------|-----|-------|
| **WorkVibe Platform (U)** | ‚úÖ | ‚úÖ | ‚úÖ |
| **Uber visibility (T1)** | ‚úÖ | ‚úÖ | ‚úÖ |
| **Uber admin (T2)** | ‚úÖ | ‚ùå | ‚úÖ |
| **Employee (S)** | ‚úÖ | ‚úÖ | ‚ùå |
| **Final result** | **‚úÖ** | ‚ùå | ‚ùå |

#### Expose Preferences to Customer Companies

We will allow each customer company (Uber) to manage its own notification preferences directly inside the WorkVibe admin experience.

WorkVibe will provide an admin-only Notification Settings page within its application. This page will be powered by SuprSend‚Äôs Tenant Preference APIs, scoped to the specific customer via JWT, to fetch and update the notification categories available to that tenant.

This approach keeps full UI and UX control with WorkVibe, fits naturally into the existing admin dashboard, and ensures each customer can configure how their organization‚Äôs notifications are sent‚Äîwithout leaving the WorkVibe platform.

üìò [Tenant Preferences ‚Üí](/docs/tenant-preference) | [User Preferences ‚Üí](/docs/user-preferences) | [Preference Evaluation ‚Üí](/docs/preference-evaluation) | [Embedded Preferences ‚Üí](/docs/embedded-preference-centre)

---

### 4. Templates

Next we will create templates for each notification type. For new employee onboarding usecase we will create `NEW_HIRE_WELCOME_EMAIL` we will use tenant variables for applying tenant by default.

<Note>
**Template reuse:** Templates are created once by the platform and rendered at send time with tenant-specific branding. These templates can also be exposed to the customer admins for customizations. This avoids creating duplicate templates per customer while still ensuring fully branded communication.
</Note>

**Template variables:**

```handlebars
// Data variables
{{employee_name}}          ‚Üí "Sarah Chen"
{{start_date}}              ‚Üí "2026-01-15"
{{manager_name}}            ‚Üí "John Doe"
{{department}}              ‚Üí "Engineering"

// Tenant branding
{{$tenant.logo}}            ‚Üí Uber logo URL
{{$tenant.primary_color}}   ‚Üí "#000000"
{{$tenant.tenant_name}}     ‚Üí "Uber"

// Recipient info
{{$recipient.name}}         ‚Üí "Sarah Chen"
{{$recipient.email}}        ‚Üí "sarah@uber.com"
```

#### Expose Templates to Customer Applications

One common requirement is to allow customer companies (like Uber) to customize templates through embeddable templates. As WorkVibe, we'll expose template editing capabilities to admins of customer companies. This will be exposed in a section called *Notification Settings.*

**How it works:**

- **Template fetching:** We will load all the templates created by WorkVibe in SuprSend platform.
- **Variant creation:** Customer companies can edit existing variants or create new tenant-specific variants.

**Scoped JWT Authentication:**

To securely expose templates, SuprSend uses scoped JWT authentication. This ensures that each customer company can only access and modify templates for their own tenant.

1. **Generate a signing key** from SuprSend Dashboard (Developers ‚Üí API Keys ‚Üí Signing Keys)
2. **Create a scoped JWT token** on WorkVibe's backend with the following payload:

```json
{
  "entity_type": "subscriber",
  "entity_id": "customer_admin_user_id",
  "exp": 1725814228,
  "iat": 1725814228,
  "scope": {
    "tenant_id": "uber"
  }
}
```

3. **Sign the token** using ES256 algorithm with the signing key
4. **Pass the token** to the customer company's frontend application

<Note>
**Security:** If the `tenant_id` passed in the template request doesn't match the JWT payload scope `tenant_id`, SuprSend will return a `403` error. This ensures tenant isolation and prevents customers from accessing other tenants' templates.
</Note>

**Template structure:**

Templates use standardized snake_case fields and handlebars variables (e.g., `{{variable}}`). All channels (email, SMS, WhatsApp, push) follow consistent structures. SuprSend automatically selects the most specific variant based on tenant ID, language, and custom conditions.

**Benefits:**

- **Tenant isolation:** Changes made by Uber won't affect other tenants' templates
- **Platform control:** WorkVibe maintains template structure and approval workflows
- **Self-service:** Customers can customize content without engineering support


For more details on template embedding, see the [Embeddable Template Editor ‚Üí](/docs/embeddable-templates) guide.

üìò [Templates ‚Üí](/docs/templates) | [Email Templates ‚Üí](/docs/email-template)

---

### 5. Choose Workflow Strategy

A **workflow** defines the orchestration logic for notifications‚Äîthe sequence of steps, conditions, delays, and channels used to deliver messages. For example, WorkVibe's product team might build a workflow for new employee onboarding that sends a welcome email on day one, a first-week check-in survey on day seven, and a manager introduction Slack message on day ten.

SuprSend supports three types of workflows. Choose the approach that best fits the use case:

<Tabs>
  <Tab title="UI Builder">
    Build workflows visually in the SuprSend dashboard with drag-and-drop nodes, conditions, and delays. Workflows are created and managed through the UI.
    
    **When to use:**
    - Non-engineers need to create or modify workflows
    - Product or marketing teams need self-service workflow creation
    - Workflows change frequently and need quick iteration
  </Tab>

  <Tab title="Dynamic Workflows">
     Trigger notifications programmatically without pre-creating workflows. WorkVibe owns orchestration and triggers workflows on-demand with template and category.
    
    **When to use:**
    - The platform already controls business logic
    - Runtime workflow creation is needed
    - Transactional notifications triggered by user actions
    - Faster go-live without workflow setup
  </Tab>

  <Tab title="Workflows API">
     Create and update workflows programmatically using the Management API. Workflows are defined in code and synced to SuprSend via API.
    
    **When to use:**
    - Workflows are version-controlled in the codebase
    - Managing workflows as infrastructure-as-code is preferred
    - CI/CD integration for workflow deployment
    - Bulk workflow creation or migration
  </Tab>
</Tabs>




üìò [Workflows ‚Üí](/docs/workflows) | [Dynamic Workflow Trigger ‚Üí](/reference/dynamic-workflow-trigger) | [Workflows API ‚Üí](/reference/create-update-workflow)

---

### 6. Configure Tenant Vendors (Optional)

Enterprise customers may require their own SMTP servers or vendor accounts for deliverability, compliance, or branding requirements. For example, if a customer company (Uber) requires their own SMTP domain for branding (e.g., sending from `noreply@uber.com`), WorkVibe can configure their SMTP and set it as a custom property in the tenant. This can be referenced in the `from_email` field in the templates. Alternatively, if Uber has its own email provider or SMS provider that they want to use, it can be added as a tenant vendor.

<Info>
**Vendor fallback chain:** If Uber's SMTP fails, notifications automatically fall back to: Uber SMTP ‚Üí Platform default SMTP (fallback)
</Info>

üìò [Tenant Vendors ‚Üí](/docs/tenant-vendor) | [Vendor Fallback ‚Üí](/docs/vendor-fallback)

---

## End-to-End Notification Flow

When WorkVibe triggers a new employee onboarding notification for Uber, SuprSend handles everything automatically:

<Steps>
  <Step title="1. Platform Identifies Tenant">
    WorkVibe passes `tenant_id: "uber"` in the workflow trigger payload. SuprSend uses this to identify which customer company's branding and preferences to apply.
  </Step>
  <Step title="2. Apply Tenant Preferences">
    Checks Uber's defaults for `onboarding.new_hire_welcome`: Email enabled, SMS disabled, Slack enabled.
  </Step>
  <Step title="3. Apply Employee Preferences">
    Employee opts out of Slack ‚Üí Final channels: Email only.
  </Step>
  <Step title="4. Resolve Template">
    Checks for a tenant-specific variant. Falls back to `NEW_HIRE_WELCOME_EMAIL` with Uber branding.
  </Step>
  <Step title="5. Render Branding">
    Applies Uber's logo, colors, and company name to template.
  </Step>
  <Step title="6. Route via Vendor">
    Routes through Uber's SMTP if configured, otherwise platform default.
  </Step>
  <Step title="7. Deliver">
    Email sent with Uber branding and onboarding details.
  </Step>
</Steps>

üìò [Dynamic Workflow Trigger ‚Üí](/reference/dynamic-workflow-trigger)

---

## Other Common Scenarios

This data modeling approach applies to various multi-tenant marketplaces and platforms:

<CardGroup cols={2}>
  <Card title="Travel booking platforms" icon="plane">
    Travelers receive confirmations branded by hotels/airlines, with tenant-specific preferences and vendor routing
  </Card>
  <Card title="Food delivery marketplaces" icon="utensils">
    Customers receive order updates branded by restaurants, each with their own branding and notification preferences
  </Card>
  <Card title="E-commerce marketplaces" icon="store">
    Shoppers receive purchase confirmations branded by sellers, with per-seller branding and vendor configuration
  </Card>
  <Card title="Event ticketing platforms" icon="ticket">
    Attendees receive tickets branded by event organizers, with organizer-level preferences and custom SMTP
  </Card>
  <Card title="Learning platforms" icon="graduation-cap">
    Students receive course updates branded by educational institutions, with institution-specific branding and channels
  </Card>
  <Card title="Healthcare scheduling platforms" icon="heart">
    Patients receive appointment reminders branded by clinics, with clinic-level preferences and compliance routing
  </Card>
</CardGroup>

---
