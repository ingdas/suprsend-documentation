---
title: "Design tenant-scoped notification architecture"
description: "Learn how to model multi-tenant notification architecture in SuprSend with tenant-level preferences, templates, and vendor routing."
---

Multi-tenant platforms run a *shared notification system* across many customer organizations (tenants). The key requirement is *tenant-specific customization*: the same notification type must adapt based on tenant context‚Äîpreferences, templates and localization, and routing (channel + vendor).

In this guide, we'll show how to model this in SuprSend using an example employee engagement platform called **WorkVibe**. It helps its customers send employee communications such as employee onboarding, performance reviews, pulse surveys, recognition messages, and policy updates.

<Note>
**Example scenario:** We'll use **Uber** as an example customer of WorkVibe. Uber uses WorkVibe platform to send notifications to its employees. WorkVibe's notification system must let its tenant Uber customize notifications within WorkVibe's platform:

- Default templates provided by WorkVibe (content, tone, localization)
- Which channels (email, Slack, etc.) are used for communication
- Employee notification preferences
- Branding and sender identity for Uber (e.g., hr@uber.com)

‚Äîall while WorkVibe continues to operate a single shared, multi-tenant notification system.

</Note>

---

## WorkVibe Company Structure

For this example let's consider WorkVibe has the following notification architecture that is common across all its customers:

<Card title="Notification architecture" icon="sitemap">
  ```
  WorkVibe ‚Üí Uber ‚Üí Onboarding ‚Üí New Employee Welcome Email
  ```
</Card>

The following section models this architecture in SuprSend platform so notifications can be sent across multiple tenants without duplicating templates or workflows.

---

## WorkVibe Concept Mapping to SuprSend 

| WorkVibe Platform | SuprSend | Example |
|:------------------|:---------|:--------|
| **Environments** | **[Workspace](/docs/what-is-suprsend#workspaces)** | Dev, Staging, Pre-prod, Prod |
| **Customer Organization** | **[Tenant](/docs/tenants)** | Uber (`tenant_id: uber`) |
| **Employee** | **[User](/docs/users)** | Employee with email, phone, and profile data (`distinct_id: employee1`) |
| **Orchestration Steps** | **[Workflows](/docs/workflows)** | Onboarding sequence: welcome email ‚Üí first week check-in ‚Üí manager introduction |
| **Message Templates** | **[Templates](/docs/templates)** | New hire welcome alert template for Email and SMS |
| **Company-level Controls** | **[Notification Categories](/docs/notification-category)** | `onboarding.new_hire_welcome` |
| **Employee Preferences** | **[User Preferences](/docs/user-preferences)** | Employee opt-in/out for specific notification types |


---

## Data Modeling in SuprSend

Follow these steps to model the multi-tenant notification architecture in SuprSend:

### 1. Tenants

We have created a tenant for each customer company programmatically using the SuprSend API or SDK. Each tenant stores branding attributes (logo, website, brand colors) along with some custom properties required for personalization.

**Required fields:**

<Card title="Example: Uber tenant configuration" icon="gear">
  <ul>
    <li><strong>tenant_id:</strong> <code>uber</code> </li>
    <li><strong>tenant_name:</strong> Uber </li>
    <li><strong>logo:</strong> https://assets.yourdomain.com/tenants/uber/logo.png </li>
    <li><strong>primary_color:</strong> #000000 </li>
    <li><strong>timezone:</strong> America/Los_Angeles </li>
  </ul>
</Card>

Other than branding properties, SuprSend allows customization of notification preferences and vendors at the per-tenant level.

üìò [Tenants ‚Üí](/docs/tenants) | [Node.js SDK ‚Üí](/docs/node-tenants) | [Python SDK ‚Üí](/docs/python-tenants) | [Go SDK ‚Üí](/docs/tenants-go)

---

### 2. Notification Categories

We have created categories mapping to WorkVibe's notification types. These categories are linked to Workflows & Preferences. SuprSend provides **Sections** and **Sub-categories** to neatly organize notification categories.

For WorkVibe, the notification categories look like:

- **Section:** Product area (e.g., `Onboarding & Lifecycle`, `Feedback & Engagement`)
- **Sub-category:** Notification type (e.g., `New Hire Welcome`, `First Week Check-in`, `Manager Feedback Request`)

<img src="/images/categories.png" alt="Notification categories example" width="700" />

üìò [Notification Categories ‚Üí](/docs/notification-category) | [Create categories ‚Üí](https://app.suprsend.com/en/staging/developers/preference-categories)

---

### 3. Preferences

SuprSend uses a four-layer preference system to determine which notifications are sent out. For WorkVibe we want admins of tenants to define which notifications are applicable for their organizations:

<CardGroup cols={2}>
  <Card title="Universal Set (U)" icon="globe">
    All categories defined by WorkVibe
  </Card>
  <Card title="Visible to Tenant (T1)" icon="eye">
    WorkVibe chooses which categories are visible to specific tenants
  </Card>
  <Card title="Configured by Tenant Admins (T2)" icon="user-shield">
    Tenant admins can disable categories/channels within WorkVibe's application
  </Card>
  <Card title="End user Preferences (S)" icon="user">
    Employees can opt-in/out at category/channel level
  </Card>
</CardGroup>

**How it works:**

SuprSend determines final delivery channels by progressively applying platform rules, company controls, and employee preferences.

**Evaluation formula:** `Final Channels = U ‚à© T1 ‚à© T2 ‚à© S`

**Example: Channel evaluation**

| Layer | Email | SMS | Slack |
|-------|-------|-----|-------|
| **WorkVibe Platform (U)** | ‚úÖ | ‚úÖ | ‚úÖ |
| **Uber visibility (T1)** | ‚úÖ | ‚úÖ | ‚úÖ |
| **Uber admin (T2)** | ‚úÖ | ‚ùå | ‚úÖ |
| **Employee (S)** | ‚úÖ | ‚úÖ | ‚ùå |
| **Final result** | **‚úÖ** | ‚ùå | ‚ùå |

#### Expose Preferences to Customer Companies

We allow each tenant (Uber) to manage its own notification preferences directly inside the WorkVibe admin experience.

WorkVibe provides an admin-only Notification Settings page within its application. This page is powered by SuprSend's Tenant Preference APIs, scoped to the specific customer via JWT, to fetch and update the notification categories available to that tenant.

This approach keeps full UI and UX control with WorkVibe, fits naturally into the existing admin dashboard, and ensures each customer can configure how their organization‚Äôs notifications are sent‚Äîwithout leaving the WorkVibe platform.

üìò [Tenant Preferences ‚Üí](/docs/tenant-preference) | [User Preferences ‚Üí](/docs/user-preferences) | [Preference Evaluation ‚Üí](/docs/preference-evaluation) | [Embedded Preferences ‚Üí](/docs/embedded-preference-centre)

---

### 4. Templates

Next we created templates for each notification type. For new employee onboarding usecase we created `NEW_HIRE_WELCOME_ALERT`. We used tenant variables for applying tenant by default.

<Note>
**Template reuse:** Templates are created once by the platform and rendered at send time with tenant-specific branding. These templates can also be exposed to the customer admins for customizations. This avoids creating duplicate templates per customer while still ensuring fully branded communication.
</Note>

**Template variables:**
Templates use standardized snake_case fields and handlebars variables (e.g., `{{variable}}`). All channels (email, SMS, WhatsApp, push) follow consistent structures. 

```handlebars
// Data variables
{{employee_name}}          ‚Üí "Sarah Chen"
{{start_date}}              ‚Üí "2026-01-15"
{{manager_name}}            ‚Üí "John Doe"
{{department}}              ‚Üí "Engineering"

// Tenant branding
{{$tenant.logo}}            ‚Üí Uber logo URL
{{$tenant.primary_color}}   ‚Üí "#000000"
{{$tenant.tenant_name}}     ‚Üí "Uber"

// Recipient info
{{$recipient.name}}         ‚Üí "Sarah Chen"
{{$recipient.email}}        ‚Üí "sarah@uber.com"
```

![Template example: New Hire Welcome Alert](/images/template__welcome.png)

#### Expose Templates to Customer Applications

One common requirement is to allow customer companies (like Uber) to customize templates through embeddable templates. As WorkVibe, we expose template editing capabilities to admins of customer companies. This is exposed in a section called *Notification Settings.*

**How it works:**

- **Template fetching:** We load all the templates created by WorkVibe in SuprSend platform.
- **Variant creation:** Customer companies can edit existing variants or create new tenant-specific variants.
- **Variant selection:** SuprSend automatically selects the most specific variant based on tenant ID, language, and custom conditions.

**Scoped JWT Authentication:**

To securely expose templates, SuprSend uses scoped JWT authentication. This ensures that each tenant can only access and modify templates for their own tenant.

Steps to generate and authenticate token 
**Template structure:**

For more details on template embedding, see the [Embeddable Template Editor](/docs/embeddable-templates) guide.

üìò [Templates ‚Üí](/docs/templates) | [Email Templates ‚Üí](/docs/email-template)

---

### 5. Workflows

**Workflows** define the orchestration logic for notifications‚Äîthe sequence of steps, conditions, delays, and channels used to deliver messages. For WorkVibe we built a workflow for new employee onboarding that sends a welcome email on day one, a first-week check-in survey on day seven, and a manager introduction Slack message on day ten.

<img src="/images/workflow_welcome.png" alt="Workflow example: New Employee Onboarding" width="250" />

SuprSend supports building workflows in three ways. For WorkVibe we have created the workflow using the UI Builder.

<Tabs>
  <Tab title="UI Builder">
    Workflows are built visually in the SuprSend dashboard with drag-and-drop nodes, conditions, and delays. Workflows are created and managed through the UI.
    
    **When to use:**
    - Non-engineers create and modify workflows
    - Workflows change frequently and need quick iteration
    - Once created workflows are version-controlled or promoted across environments via CLI
  </Tab>

  <Tab title="Dynamic Workflows">
    Notifications are triggered programmatically without pre-creating workflows in UI. This createds a dynamic workflow which cannot be modified from the UI.
    
    **When to use:**
    - Sigle step transactional notifications (example: email verification)
    - Faster go-live without workflow setup
  </Tab>

  <Tab title="Workflows API">
     Create and update workflows programmatically using the Management API. Workflows are defined in code and synced to SuprSend via API.
    
    **When to use:**
    - Workflows are version-controlled in the codebase
    - Managing workflows as infrastructure-as-code is preferred
    - CI/CD integration for workflow deployment
    - Bulk workflow creation or migration
    - The platform controls business logic
  </Tab>
</Tabs>




üìò [Workflows ‚Üí](/docs/workflows) | [Dynamic Workflow Trigger ‚Üí](/reference/dynamic-workflow-trigger) | [Workflows API ‚Üí](/reference/create-update-workflow)

---

### 6. Tenant Vendors (Optional)

Enterprise customers may require their own SMTP servers or vendor accounts for deliverability, compliance, or branding requirements. In WorkVibe's case its customer Uber requires their own SMTP domain. For WorkVibe we have configured Uber's SMTP and set it as a custom property in SuprSend tenant. This can be referenced in the `from_email` field in the templates. For SMS Uber has their own SMS provider so we have configured as a tenant vendor.

<Info>
**Vendor fallback chain:** If Uber's SMS Vendor fails, notifications automatically fallback to: WorkVibe's Default SMS Provider
</Info>

üìò [Tenant Vendors ‚Üí](/docs/tenant-vendor) | [Vendor Fallback ‚Üí](/docs/vendor-fallback)

---

## End-to-End Notification Flow

When WorkVibe triggers a new employee onboarding notification for Uber, SuprSend handles everything automatically:

<Steps>
  <Step title="Platform Identifies Tenant">
    WorkVibe passes `tenant_id: "uber"` in the workflow trigger payload. SuprSend uses this to identify which customer company's branding and preferences to apply.
  </Step>
  <Step title="Apply Tenant Preferences">
    Checks Uber's defaults for `onboarding.new_hire_welcome`: Email enabled, SMS disabled, Slack enabled.
  </Step>
  <Step title="Apply Employee Preferences">
    Employee opts out of Slack ‚Üí Final channels: Email only.
  </Step>
  <Step title="Resolve Template">
    Checks for a tenant-specific variant. Falls back to the default `NEW_HIRE_WELCOME_ALERT` with Uber branding.
  </Step>
  <Step title="Route via Vendor">
    Routes through Uber's Vendor if configured, otherwise WorkVibe platform default.
  </Step>
  <Step title="Deliver">
    Notification sent with Uber branding and onboarding details across all channels.
  </Step>
</Steps>

<img src="/images/trigger_workflow.png" alt="Workflow trigger success example" width="700" />

üìò [Dynamic Workflow Trigger ‚Üí](/reference/dynamic-workflow-trigger)

---

## Other Common Scenarios

This data modeling approach applies to various multi-tenant marketplaces and platforms:

<CardGroup cols={2}>
  <Card title="Travel booking platforms" icon="plane">
    Travelers receive confirmations branded by hotels/airlines, with tenant-specific preferences and vendor routing
  </Card>
  <Card title="Food delivery marketplaces" icon="utensils">
    Customers receive order updates branded by restaurants, each with their own branding and notification preferences
  </Card>
  <Card title="E-commerce marketplaces" icon="store">
    Shoppers receive purchase confirmations branded by sellers, with per-seller branding and vendor configuration
  </Card>
  <Card title="Event ticketing platforms" icon="ticket">
    Attendees receive tickets branded by event organizers, with organizer-level preferences and custom SMTP
  </Card>
  <Card title="Learning platforms" icon="graduation-cap">
    Students receive course updates branded by educational institutions, with institution-specific branding and channels
  </Card>
  <Card title="Healthcare scheduling platforms" icon="heart">
    Patients receive appointment reminders branded by clinics, with clinic-level preferences and compliance routing
  </Card>
</CardGroup>

---
